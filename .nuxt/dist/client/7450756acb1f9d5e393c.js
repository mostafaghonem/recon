(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{745:function(t,e,r){var content=r(746);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(7).default)("08d4b84c",content,!0,{sourceMap:!1})},746:function(t,e,r){(t.exports=r(6)(!1)).push([t.i,".v-form>.container{padding:16px}.v-form>.container>.layout>.flex{padding:8px}.v-form>.container>.layout:only-child{margin:-8px}.v-form>.container>.layout:not(:only-child){margin:auto -8px}",""])},789:function(t,e,r){"use strict";r(51),r(35),r(18),r(203),r(26),r(40),r(745);var n=r(56);e.a={name:"v-form",mixins:[Object(n.b)("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(input){var t=this,e=function(input){return input.$watch("hasError",function(e){t.$set(t.errorBag,input._uid,e)},{immediate:!0})},r={_uid:input._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?r.shouldValidate=input.$watch("shouldValidate",function(n){n&&(t.errorBag.hasOwnProperty(input._uid)||(r.valid=e(input)))}):r.valid=e(input),r},validate:function(){return!this.inputs.filter(function(input){return!input.validate(!0)}).length},reset:function(){for(var t=this,i=this.inputs.length;i--;)this.inputs[i].reset();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},resetValidation:function(){for(var t=this,i=this.inputs.length;i--;)this.inputs[i].resetValidation();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},register:function(input){var t=this.watchInput(input);this.inputs.push(input),this.watchers.push(t)},unregister:function(input){var t=this.inputs.find(function(i){return i._uid===input._uid});if(t){var e=this.watchers.find(function(i){return i._uid===t._uid});e.valid&&e.valid(),e.shouldValidate&&e.shouldValidate(),this.watchers=this.watchers.filter(function(i){return i._uid!==t._uid}),this.inputs=this.inputs.filter(function(i){return i._uid!==t._uid}),this.$delete(this.errorBag,t._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}},925:function(t,e,r){"use strict";r.r(e);r(292),r(26),r(40);var n=r(14),o=(r(44),r(11)),l=r(27),c=r(582),d=r(52),f=r(578),m=r.n(f),h=r(579),v={layout:"dashboard",data:function(){var t=this;return{militaryIdLength:13,nationalIdLength:14,recordIdLength:10,defaultPermissions:[],defaultRanks:[],user:{fullName:void 0,username:void 0,password:void 0,permission:[],permissions:[]},disabled:{branch:!1,permissions:!1},rules:{fullName:[function(e){return!!e||t.$t("FullName_Required")},function(e){return t.validateUserName(e)}],username:[function(e){return!!e||t.$t("Username_Required")},function(e){return t.validateUserName(e)}],password:[function(e){return!!e||t.$t("Password_Required")},function(e){return t.validatePassword(e)}]},permissions:[]}},created:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("the component",this),e=this.$store.app.context,(r=e.nuxtState)&&(!r||r.user)){t.next=5;break}return t.abrupt("return");case 5:this.setBranch(r.user);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),middleware:["auth","isNotLoggedIn","isAuthorized"],components:{materialCard:h.a},computed:Object(n.a)({},Object(l.c)({locations:"app/getLocations",defaults:"app/getDefaults",fullname:"user/getFullname"}),{divisionsComputed:function(){var t=this;return this.user.army?this.divisions.filter(function(e){return e.army===t.user.army&&["division"].includes(e.type)}):this.divisions.filter(function(t){return["division"].includes(t.type)})},unitsComputed:function(){var t=this,e=this.divisions.filter(function(t){return["battalion","company"].includes(t.type)});return this.user.divisionId&&(e=this.user.divisionId?e.filter(function(e){return e.divisionId&&e.divisionId._id===t.user.divisionId}):e),!this.user.divisionId&&this.user.army&&(e=e.filter(function(e){return e.army===t.user.army})),e},branchesComputed:function(){}}),methods:{moment:m.a,submit:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$refs.form.validate()){t.next=10;break}return"/users/create-user",t.next=5,Object(d.e)("/users/create-user",this.user);case 5:if(!(e=t.sent).error){t.next=8;break}return t.abrupt("return",c.b.fire({icon:"error",title:e.error,timer:4e3,showConfirmButton:!1}));case 8:c.b.fire({icon:"success",title:this.$i18n.t("Added_User_Success"),timer:4e3,showConfirmButton:!1}),setTimeout(function(){window.location.href="/users"},4e3);case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),validateUserName:function(t){return void 0===t},validatePassword:function(t){return void 0===t},setPermissions:function(t){var e=void 0;switch(this.defaults.RANKS.findIndex(function(e){return e.value===t})){case 0:e=0;break;case 1:case 2:case 3:case 4:case 5:e=1;break;case 6:case 7:case 8:case 9:case 10:e=2;break;case 11:case 12:e=3}console.log("permissions index",e),this.user.permissions=this.defaults.PERMISSIONS[e].value},setBranch:function(t){var e=t.permissions;t.branch;!e.includes("admin")&&e.includes("branch_head")&&(this.user.branch=t.branch,this.disabled.branch=!0,this.disabled.permissions=!0)}}},x=r(22),w=r(34),_=r.n(w),y=r(738),$=r(185),S=r(177),N=r(178),k=r(789),I=r(179),R=r(574),component=Object(x.a)(v,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{staticStyle:{direction:"rtl"},attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[r("v-layout",{attrs:{"justify-center":"",wrap:""}},[r("v-flex",{attrs:{xs12:"",md12:""}},[r("material-card",{attrs:{dark:"",color:"deep",title:t.$t("Add_User")}},[r("v-form",{ref:"form",attrs:{autocomplete:"new-password"}},[r("v-container",{attrs:{"py-0":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:"",md2:""}},[r("v-text-field",{staticClass:"black-input",attrs:{label:t.$t("FullName"),rules:t.rules.fullName},model:{value:t.user.fullName,callback:function(e){t.$set(t.user,"fullName",e)},expression:"user.fullName"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:"",md2:""}},[r("v-text-field",{staticClass:"white-input",attrs:{label:t.$t("USERNAME"),rules:t.rules.username},model:{value:t.user.username,callback:function(e){t.$set(t.user,"username",e)},expression:"user.username"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:"",md2:""}},[r("v-text-field",{staticClass:"white-input",attrs:{minLength:5,label:t.$t("PASSWORD"),rules:t.rules.password,type:"password"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:"",md2:""}},[r("v-autocomplete",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.disabled.branch&&t.defaults.RANKS?t.defaults.RANKS.slice(0,11):t.defaults.RANKS,"item-text":"ar","item-value":"value",label:t.$t("Rank")},model:{value:t.user.rank,callback:function(e){t.$set(t.user,"rank",e)},expression:"user.rank"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:"",md2:""}},[r("v-autocomplete",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.defaults.BRANCHES,"item-text":"ar","item-value":"value",disabled:t.disabled.branch,label:t.$t("Branch")},model:{value:t.user.branch,callback:function(e){t.$set(t.user,"branch",e)},expression:"user.branch"}})],1),t._v(" "),r("v-flex",{attrs:{xs12:"",md2:""}},[r("v-autocomplete",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.disabled.branch&&t.defaults.PERMISSIONS?t.defaults.PERMISSIONS.slice(0,3):t.defaults.PERMISSIONS,"item-text":"ar","item-value":"value",label:t.$t("Permissions"),multiple:""},model:{value:t.user.permissions,callback:function(e){t.$set(t.user,"permissions",e)},expression:"user.permissions"}})],1)],1),t._v(" "),r("v-flex",{attrs:{xs12:"","text-xs-right":""}},[r("v-btn",{staticClass:"font-weight-light add-button v-btn-add",on:{click:t.submit}},[t._v("\n                  "+t._s(t.$t("Add"))+"\n                ")])],1)],1)],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);e.default=component.exports;_()(component,{VAutocomplete:y.a,VBtn:$.a,VContainer:S.a,VFlex:N.a,VForm:k.a,VLayout:I.a,VTextField:R.a})}}]);