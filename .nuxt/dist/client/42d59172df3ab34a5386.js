(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{738:function(t,e,n){"use strict";n(740),n(51),n(87),n(88),n(18),n(767);var o=n(735),r=n(736),l=n(1);e.a={name:"v-combobox",extends:r.a,props:{delimiters:{type:Array,default:function(){return[]}},returnObject:{type:Boolean,default:!0}},data:function(){return{editingIndex:-1}},computed:{counterValue:function(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot:function(){return o.a.options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed:function(){return!0},menuCanShow:function(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)}},methods:{onFilteredItemsChanged:function(){},onInternalSearchChanged:function(t){if(t&&this.multiple&&this.delimiters.length){var e=this.delimiters.find(function(e){return t.endsWith(e)});null!=e&&(this.internalSearch=t.slice(0,t.length-e.length),this.updateTags())}this.updateMenuDimensions()},genChipSelection:function(t,e){var n=this,r=o.a.options.methods.genChipSelection.call(this,t,e);return this.multiple&&(r.componentOptions.listeners.dblclick=function(){n.editingIndex=e,n.internalSearch=n.getText(t),n.selectedIndex=-1}),r},onChipInput:function(t){o.a.options.methods.onChipInput.call(this,t),this.editingIndex=-1},onEnterDown:function(t){t.preventDefault(),o.a.options.methods.onEnterDown.call(this),this.getMenuIndex()>-1||this.updateSelf()},onKeyDown:function(t){var e=t.keyCode;o.a.options.methods.onKeyDown.call(this,t),this.multiple&&e===l.q.left&&0===this.$refs.input.selectionStart&&this.updateSelf(),this.changeSelectedIndex(e)},onTabDown:function(t){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return t.preventDefault(),t.stopPropagation(),this.updateTags();r.a.options.methods.onTabDown.call(this,t)},selectItem:function(t){this.editingIndex>-1?this.updateEditing():o.a.options.methods.selectItem.call(this,t)},setSelectedItems:function(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.internalSearch;o.a.options.methods.setValue.call(this,t)},updateEditing:function(){var t=this.internalValue.slice();t[this.editingIndex]=this.internalSearch,this.setValue(t),this.editingIndex=-1},updateCombobox:function(){var t=Boolean(this.$scopedSlots.selection)||this.hasChips;t&&!this.searchIsDirty||(this.internalSearch!==this.getText(this.internalValue)&&this.setValue(),t&&(this.internalSearch=void 0))},updateSelf:function(){this.multiple?this.updateTags():this.updateCombobox()},updateTags:function(){var t=this.getMenuIndex();if(!(t<0)||this.searchIsDirty){if(this.editingIndex>-1)return this.updateEditing();var e=this.selectedItems.indexOf(this.internalSearch);if(e>-1){var n=this.internalValue.slice();n.splice(e,1),this.setValue(n)}if(t>-1)return this.internalSearch=null;this.selectItem(this.internalSearch),this.internalSearch=null}}}}},740:function(t,e,n){"use strict";var o=n(19),r=n(54),l=n(201),c="".endsWith;o(o.P+o.F*n(202)("endsWith"),"String",{endsWith:function(t){var e=l(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,o=r(e.length),d=void 0===n?o:Math.min(r(n),o),v=String(t);return c?c.call(e,v,d):e.slice(d-v.length,d)===v}})},744:function(t,e,n){var content=n(745);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(7).default)("08d4b84c",content,!1,{sourceMap:!1})},745:function(t,e,n){(t.exports=n(6)(!1)).push([t.i,".v-form>.container{padding:16px}.v-form>.container>.layout>.flex{padding:8px}.v-form>.container>.layout:only-child{margin:-8px}.v-form>.container>.layout:not(:only-child){margin:auto -8px}",""])},749:function(t,e,n){var content=n(750);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(7).default)("0404d2be",content,!1,{sourceMap:!1})},750:function(t,e,n){(t.exports=n(6)(!1)).push([t.i,'.theme--light.v-overflow-btn .v-input__control:before,.theme--light.v-overflow-btn .v-input__slot:before{background-color:rgba(0,0,0,.12)!important}.theme--light.v-overflow-btn.v-text-field--outline .v-input__control:before,.theme--light.v-overflow-btn.v-text-field--outline .v-input__slot:before{background-color:transparent!important}.theme--light.v-overflow-btn--editable.v-input--is-focused .v-input__append-inner,.theme--light.v-overflow-btn--editable.v-select--is-menu-active .v-input__append-inner,.theme--light.v-overflow-btn--editable:hover .v-input__append-inner,.theme--light.v-overflow-btn--segmented .v-input__append-inner{border-left:1px solid rgba(0,0,0,.12)}.theme--light.v-overflow-btn.v-input--is-focused .v-input__slot,.theme--light.v-overflow-btn.v-select--is-menu-active .v-input__slot,.theme--light.v-overflow-btn:hover .v-input__slot{background:#fff}.theme--dark.v-overflow-btn .v-input__control:before,.theme--dark.v-overflow-btn .v-input__slot:before{background-color:hsla(0,0%,100%,.12)!important}.theme--dark.v-overflow-btn.v-text-field--outline .v-input__control:before,.theme--dark.v-overflow-btn.v-text-field--outline .v-input__slot:before{background-color:transparent!important}.theme--dark.v-overflow-btn--editable.v-input--is-focused .v-input__append-inner,.theme--dark.v-overflow-btn--editable.v-select--is-menu-active .v-input__append-inner,.theme--dark.v-overflow-btn--editable:hover .v-input__append-inner,.theme--dark.v-overflow-btn--segmented .v-input__append-inner{border-left:1px solid hsla(0,0%,100%,.12)}.theme--dark.v-overflow-btn.v-input--is-focused .v-input__slot,.theme--dark.v-overflow-btn.v-select--is-menu-active .v-input__slot,.theme--dark.v-overflow-btn:hover .v-input__slot{background:#424242}.v-overflow-btn{margin-top:12px;padding-top:0}.v-overflow-btn:not(.v-overflow-btn--editable)>.v-input__control>.v-input__slot{cursor:pointer}.v-overflow-btn .v-select__slot{height:48px}.v-overflow-btn .v-select__slot input{margin-left:16px;cursor:pointer}.v-overflow-btn .v-select__selection--comma:first-child{margin-left:16px}.v-overflow-btn .v-input__slot{transition:.3s cubic-bezier(.25,.8,.5,1)}.v-overflow-btn .v-input__slot:after{content:none}.v-overflow-btn .v-label{margin-left:16px;top:calc(50% - 10px)}.v-overflow-btn .v-input__append-inner{width:48px;height:48px;align-self:auto;align-items:center;margin-top:0;padding:0;flex-shrink:0}.v-overflow-btn .v-input__append-outer,.v-overflow-btn .v-input__prepend-outer{margin-top:12px;margin-bottom:12px}.v-overflow-btn .v-input__control:before{height:1px;top:-1px;content:"";left:0;position:absolute;transition:.3s cubic-bezier(.25,.8,.5,1);width:100%}.v-overflow-btn.v-input--is-focused .v-input__slot,.v-overflow-btn.v-select--is-menu-active .v-input__slot{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.v-overflow-btn .v-select__selections{width:0}.v-overflow-btn--segmented .v-select__selections{flex-wrap:nowrap}.v-overflow-btn--segmented .v-select__selections .v-btn{border-radius:0;margin:0 -16px 0 0;height:48px;width:100%}.v-overflow-btn--segmented .v-select__selections .v-btn__content{justify-content:start}.v-overflow-btn--segmented .v-select__selections .v-btn__content:before{background-color:transparent}.v-overflow-btn--editable .v-select__slot input{cursor:text}.v-overflow-btn--editable .v-input__append-inner,.v-overflow-btn--editable .v-input__append-inner *{cursor:pointer}',""])},787:function(t,e,n){"use strict";n(51),n(35),n(18),n(203),n(26),n(40),n(744);var o=n(56);e.a={name:"v-form",mixins:[Object(o.b)("form")],inheritAttrs:!1,props:{value:Boolean,lazyValidation:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(){var t=Object.values(this.errorBag).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(input){var t=this,e=function(input){return input.$watch("hasError",function(e){t.$set(t.errorBag,input._uid,e)},{immediate:!0})},n={_uid:input._uid,valid:void 0,shouldValidate:void 0};return this.lazyValidation?n.shouldValidate=input.$watch("shouldValidate",function(o){o&&(t.errorBag.hasOwnProperty(input._uid)||(n.valid=e(input)))}):n.valid=e(input),n},validate:function(){return!this.inputs.filter(function(input){return!input.validate(!0)}).length},reset:function(){for(var t=this,i=this.inputs.length;i--;)this.inputs[i].reset();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},resetValidation:function(){for(var t=this,i=this.inputs.length;i--;)this.inputs[i].resetValidation();this.lazyValidation&&setTimeout(function(){t.errorBag={}},0)},register:function(input){var t=this.watchInput(input);this.inputs.push(input),this.watchers.push(t)},unregister:function(input){var t=this.inputs.find(function(i){return i._uid===input._uid});if(t){var e=this.watchers.find(function(i){return i._uid===t._uid});e.valid&&e.valid(),e.shouldValidate&&e.shouldValidate(),this.watchers=this.watchers.filter(function(i){return i._uid!==t._uid}),this.inputs=this.inputs.filter(function(i){return i._uid!==t._uid}),this.$delete(this.errorBag,t._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:Object.assign({novalidate:!0},this.$attrs),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}}},788:function(t,e,n){"use strict";var o=n(735),r=(n(51),n(749),n(736).a),l=n(50),c=n(204),d=n(15),v=r.extend({name:"v-overflow-btn",props:{segmented:Boolean,editable:Boolean,transition:o.a.options.props.transition},computed:{classes:function(){return Object.assign(r.options.computed.classes.call(this),{"v-overflow-btn":!0,"v-overflow-btn--segmented":this.segmented,"v-overflow-btn--editable":this.editable})},isAnyValueAllowed:function(){return this.editable||r.options.computed.isAnyValueAllowed.call(this)},isSingle:function(){return!0},computedItems:function(){return this.segmented?this.allItems:this.filteredItems},$_menuProps:function(){var t=r.options.computed.$_menuProps.call(this);return t.transition=t.transition||"v-menu-transition",t}},methods:{genSelections:function(){return this.editable?r.options.methods.genSelections.call(this):o.a.options.methods.genSelections.call(this)},genCommaSelection:function(t,e,n){return this.segmented?this.genSegmentedBtn(t):o.a.options.methods.genCommaSelection.call(this,t,e,n)},genInput:function(){var input=l.a.options.methods.genInput.call(this);return input.data.domProps.value=this.editable?this.internalSearch:"",input.data.attrs.readonly=!this.isAnyValueAllowed,input},genLabel:function(){if(this.editable&&this.isFocused)return null;var label=l.a.options.methods.genLabel.call(this);return label?(label.data.style={},label):label},genSegmentedBtn:function(t){var e=this,n=this.getValue(t),o=this.computedItems.find(function(i){return e.getValue(i)===n})||t;return o.text&&o.callback?this.$createElement(c.a,{props:{flat:!0},on:{click:function(t){t.stopPropagation(),o.callback(t)}}},[o.text]):(Object(d.c)("When using 'segmented' prop without a selection slot, items must contain both a text and callback property",this),null)}}}),h=n(738).a,f=n(206),m=n(205);n.d(e,"a",function(){return _});var _={functional:!0,$_wrapperFor:o.a,props:{autocomplete:Boolean,combobox:Boolean,multiple:Boolean,tags:Boolean,editable:Boolean,overflow:Boolean,segmented:Boolean},render:function(t,e){var n=e.props,data=e.data,l=e.slots,c=e.parent;Object(m.a)(data);var x=Object(f.a)(l(),t);return n.autocomplete&&Object(d.d)("<v-select autocomplete>","<v-autocomplete>",_,c),n.combobox&&Object(d.d)("<v-select combobox>","<v-combobox>",_,c),n.tags&&Object(d.d)("<v-select tags>","<v-combobox multiple>",_,c),n.overflow&&Object(d.d)("<v-select overflow>","<v-overflow-btn>",_,c),n.segmented&&Object(d.d)("<v-select segmented>","<v-overflow-btn segmented>",_,c),n.editable&&Object(d.d)("<v-select editable>","<v-overflow-btn editable>",_,c),data.attrs=data.attrs||{},n.combobox||n.tags?(data.attrs.multiple=n.tags,t(h,data,x)):n.autocomplete?(data.attrs.multiple=n.multiple,t(r,data,x)):n.overflow||n.segmented||n.editable?(data.attrs.segmented=n.segmented,data.attrs.editable=n.editable,t(v,data,x)):(data.attrs.multiple=n.multiple,t(o.a,data,x))}};e.b=_},918:function(t,e,n){"use strict";n.r(e);n(28),n(26),n(40);var o=n(14),r=(n(44),n(11)),l=n(27),c=n(582),d=n(52),v=n(579),h=["army","divisionId","brigadeId","companyId"],f={layout:"dashboard",data:function(){var t=this;return{code:"",type:"",divisions:[],divisionType:void 0,army:void 0,divisionId:void 0,brigadeId:void 0,battalionId:void 0,companyId:void 0,name:void 0,edit:!1,force:"86",rules:{ar:[function(e){return!!e||t.$t("".concat(t.codeTypesUpper,"_FULLNAME_REQUIRED"))},function(e){return t.validateunitName(e)}],force:[function(e){return!!e||t.$t("Force_Required")}],army:[function(e){return!!e||t.$t("Army_Required")}],name:[function(e){return!!e||t.$t("Name_Required")}],unitType:[function(e){return!!e||t.$t("Unit_Type_Required")}]}}},created:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDivisions();case 2:if(t.sent,e=this.$store.app.context,(n=e.nuxtState)&&(!n||n.unit)){t.next=7;break}return t.abrupt("return");case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),middleware:["auth","isNotLoggedIn"],meta:{branches:["followup"]},components:{materialCard:v.a},computed:Object(o.a)({},Object(l.c)({locations:"app/getLocations",defaults:"app/getDefaults"}),{divisionsComputed:function(){var t=this;return this.army?this.divisions.filter(function(e){return e.army===t.army&&["division"].includes(e.type)}):this.divisions.filter(function(t){return["division"].includes(t.type)})},brigadesComputed:function(){var t=this;this.army||this.battalionId||this.companyId,console.log("Computing brigade stuff",this.army),console.log("Computing brigade stuff division",this.divisionType);var e=h.filter(function(e){return t[e]}).map(function(e){return{key:e,value:t[e]}});return this.divisions.filter(function(t){var n=e.length;if(["brigade"].includes(t.type))return e.filter(function(e){var n=e.key,o=e.value;return t[n]==o}).length===n})},battalionsComputed:function(){var t=this;this.army||this.battalionId||this.companyId,console.log("Computing brigade stuff",this.army),console.log("Computing brigade stuff division",this.divisionType);var e=h.filter(function(e){return t[e]}).map(function(e){return{key:e,value:t[e]}});return this.divisions.filter(function(t){var n=e.length;if(["battalion"].includes(t.type))return e.filter(function(e){var n=e.key,o=e.value;return t[n]==o}).length===n})}}),methods:{getDivisions:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"/divisions",t.next=3,Object(d.d)("/divisions");case 3:if(!(e=t.sent).error){t.next=7;break}return console.log("error getting divisions",e.error),t.abrupt("return");case 7:this.divisions=e.divisions;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),submit:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){var e,path,data,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.edit?"Edited":"Added",!this.$refs.form.validate()){t.next=12;break}return path=this.edit?"/divisions/edit/".concat(this.unitId):"/divisions",data={type:this.divisionType,name:this.name,divisionId:this.divisionId,brigadeId:this.brigadeId,battalionId:this.battalionId,army:this.army,force:this.force},t.next=7,Object(d.e)(path,data);case 7:if(!(n=t.sent).error){t.next=10;break}return t.abrupt("return",c.b.fire({icon:"error",title:n.error,timer:4e3,showConfirmButton:!1}));case 10:c.b.fire({icon:"success",title:this.$i18n.t("".concat(e,"_").concat(this.divisionType.toUpperCase(),"_Success")),timer:4e3,showConfirmButton:!1}),setTimeout(function(){window.location.href="/units"},4e3);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),validateunitName:function(t){return void 0===t},setAll:function(t){this.divisionId=void 0,this.brigadeId=void 0,this.battalionId=void 0,this.companyId=void 0}},asyncData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r,path,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.route,r=n.path.substr(n.path.lastIndexOf("/")+1),n.path.includes("edit")){t.next=4;break}return t.abrupt("return",{});case 4:return path="/divisions/data/".concat(r),t.next=7,Object(d.d)(path);case 7:if(!(l=t.sent).error){t.next=11;break}return c.b.fire({icon:"error",title:l.error,timer:4e3,showConfirmButton:!1}),t.abrupt("return",{});case 11:return t.abrupt("return",Object(o.a)({unitId:r},l,{divisionType:l.type,force:l.force,edit:!0}));case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},m=n(22),_=n(34),x=n.n(_),w=n(736),y=n(185),I=n(177),S=n(178),k=n(787),$=n(179),C=n(788),V=n(574),component=Object(m.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{direction:"rtl"},attrs:{"fill-height":"",fluid:"","grid-list-xl":""}},[n("v-layout",{attrs:{"justify-center":"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md12:""}},[n("material-card",{attrs:{dark:"",color:"deep",title:t.$t("ADD_UNIT")}},[n("v-form",{ref:"form",attrs:{autocomplete:"new-password"}},[n("v-container",{attrs:{"py-0":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:"",md3:""}},[n("v-autocomplete",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.defaults.UNIT_TYPES,"item-text":"ar","item-value":"value",label:t.$t("Unit_Type"),clearable:""},model:{value:t.divisionType,callback:function(e){t.divisionType=e},expression:"divisionType"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md3:""}},[n("v-select",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.defaults.FORCES_LIST,"item-text":"ar","item-value":"value",label:t.$t("Force")},model:{value:t.force,callback:function(e){t.force=e},expression:"force"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md3:""}},[n("v-select",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.defaults.ARMY_LIST,"item-text":"ar","item-value":"value",label:t.$t("Army"),clearable:""},on:{change:t.setAll},model:{value:t.army,callback:function(e){t.army=e},expression:"army"}})],1),t._v(" "),["company","battalion","brigade"].includes(t.divisionType)?n("v-flex",{attrs:{xs12:"",md3:""}},[n("v-select",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.divisionsComputed,"item-text":"name","item-value":"_id",label:t.$t("Division"),clearable:""},model:{value:t.divisionId,callback:function(e){t.divisionId=e},expression:"divisionId"}})],1):t._e(),t._v(" "),["company","battalion"].includes(t.divisionType)?n("v-flex",{attrs:{xs12:"",md3:""}},[n("v-select",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.brigadesComputed,"item-text":"name","item-value":"_id",label:t.$t("Brigade"),clearable:""},model:{value:t.brigadeId,callback:function(e){t.brigadeId=e},expression:"brigadeId"}})],1):t._e(),t._v(" "),["company"].includes(t.divisionType)?n("v-flex",{attrs:{xs12:"",md3:""}},[n("v-select",{staticClass:"form-select",attrs:{"no-data-text":t.$t("No_Selections"),items:t.battalionsComputed,"item-text":"name","item-value":"_id",label:t.$t("Battalion"),clearable:""},model:{value:t.battalionId,callback:function(e){t.battalionId=e},expression:"battalionId"}})],1):t._e(),t._v(" "),t.divisionType?n("v-flex",{attrs:{xs12:"",md3:""}},[n("v-text-field",{staticClass:"black-input",attrs:{"no-data-text":t.$t("No_Selections"),label:t.$t(t.divisionType.toUpperCase()+"_FULLNAME"),rules:t.rules.name},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1):t._e()],1),t._v(" "),n("v-flex",{attrs:{xs12:"","text-xs-right":""}},[n("v-btn",{staticClass:"font-weight-light add-button v-btn-add",on:{click:t.submit}},[t._v("\n                  "+t._s(t.edit?t.$t("Edit"):t.$t("Add"))+"\n                ")])],1)],1)],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);e.default=component.exports;x()(component,{VAutocomplete:w.a,VBtn:y.a,VContainer:I.a,VFlex:S.a,VForm:k.a,VLayout:$.a,VSelect:C.a,VTextField:V.a})}}]);